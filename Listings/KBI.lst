C51 COMPILER V9.54   KBI                                                                   04/01/2016 10:06:44 PAGE 1   


C51 COMPILER V9.54, COMPILATION OF MODULE KBI
OBJECT MODULE PLACED IN .\Objects\KBI.obj
COMPILER INVOKED BY: D:\Program Files (x86)\Keil_v5\C51\BIN\C51.EXE KBI.c ROM(COMPACT) OPTIMIZE(8,SPEED) BROWSE DEBUG OB
                    -JECTEXTEND PRINT(.\Listings\KBI.lst) TABS(3) OBJECT(.\Objects\KBI.obj)

line level    source

   1          /*------------------------------------------------------------------*-
   2             A.C (v1.00)
   3            ------------------------------------------------------------------
   4             Simple switch interface code, with software debounce.
   5          
   6             COPYRIGHT
   7             ---------
   8             This code is copyright (c) 2001 by Richard Zhang.
   9          -*------------------------------------------------------------------*/
  10          
  11          #include "Main.h"
  12          #include "Port.h"
  13          
  14          #include "KBI.h"
  15          
  16          // ------ Public variable definitions ------------------------------
  17          bit KBI_G;
  18          // ------ Public variable declarations -----------------------------
  19          
  20          // ------ Private variables ----------------------------------------
  21          
  22          // ------ Private constants ----------------------------------------
  23          
  24          /*------------------------------------------------------------------*-
  25            KBI_Init()
  26            Initialisation function for the switch library.
  27          -*------------------------------------------------------------------*/
  28          void KBI_Init(void)
  29             {  
  30   1         KBI_G = 0;
  31   1         
  32   1         // Set PIN23, PIN24 to low voltage interrupt.
  33   1         KBLS1 |= 0x18;
  34   1         KBLS0 |= 0x18;
  35   1         // Set KBI flag and enable.
  36   1         KBIF &= 0xe7;
  37   1         KBIE |= 0x18;
  38   1         EKB = 1; 
  39   1         }
  40          
  41          /*-----------------------------------------------------------
  42             KBI_ISR()
  43             键盘中断，使芯片从省电模式中唤醒
  44          -----------------------------------------------------------*/
  45          void KBI_ISR(void) interrupt 7
  46             {
  47   1         KBIF &= 0xe7;
  48   1         
  49   1         KBI_G = 1;
  50   1         }
  51          
  52          /*------------------------------------------------------------------*-
  53            ---- END OF FILE -------------------------------------------------
  54          -*------------------------------------------------------------------*/
C51 COMPILER V9.54   KBI                                                                   04/01/2016 10:06:44 PAGE 2   



MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =     23    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =      1    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
