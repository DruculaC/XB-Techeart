C51 COMPILER V9.54   ISP_DATAFLASH                                                         08/17/2016 14:42:40 PAGE 1   


C51 COMPILER V9.54, COMPILATION OF MODULE ISP_DATAFLASH
OBJECT MODULE PLACED IN .\Objects\ISP_DataFlash.obj
COMPILER INVOKED BY: D:\Program Files (x86)\Keil_v5\C51\BIN\C51.EXE ISP_DataFlash.c ROM(COMPACT) OPTIMIZE(8,SPEED) BROWS
                    -E DEBUG OBJECTEXTEND PRINT(.\Listings\ISP_DataFlash.lst) TABS(3) OBJECT(.\Objects\ISP_DataFlash.obj)

line level    source

   1          #include "ISP_DataFlash.h"
   2          #include "main.h"
   3          
   4          extern tByte received_data_buffer[7];     
   5          
   6          
   7          //--------------------------------------------------------------------------------------------------------
             ----
   8          void Enable_ISP(void)
   9          {   
  10   1         /* Enable ISP  */ 
  11   1         ISPCN=0x30;
  12   1         EA=0;
  13   1         TA = 0xAA;
  14   1         TA = 0x55;
  15   1         CHPCON |= 0x01; 
  16   1         EA=1;
  17   1         Trigger_ISP();     
  18   1      }
  19          //--------------------------------------------------------------------------------------------------------
             ----
  20          void Disable_ISP(void)
  21          {   
  22   1         /* Disable ISP */ 
  23   1         ISPCN=0x30;
  24   1         Trigger_ISP(); 
  25   1         EA=0;
  26   1         TA = 0xAA;
  27   1         TA = 0x55;
  28   1         CHPCON &= 0xFE; 
  29   1         EA=1;     
  30   1      }
  31          //--------------------------------------------------------------------------------------------------------
             ----
  32          void Trigger_ISP(void)
  33          {       
  34   1         EA=0;
  35   1         TA = 0xAA;
  36   1         TA = 0x55;
  37   1         ISPTRG |= 0x01;
  38   1         EA=1;      
  39   1      }
  40          
  41          void Flash_Page_Erase(unsigned int address)
  42          {
  43   1         Enable_ISP();
  44   1         ISPCN=0x22;
  45   1         ISPAH=address/256;
  46   1         ISPAL=address%256;
  47   1         Trigger_ISP();
  48   1         Disable_ISP(); 
  49   1      }
  50          
  51          void Flash_Write_Data(unsigned int address,unsigned char dat)
C51 COMPILER V9.54   ISP_DATAFLASH                                                         08/17/2016 14:42:40 PAGE 2   

  52          {
  53   1         Enable_ISP();
  54   1         ISPCN=0x21;
  55   1         ISPAH=address/256;
  56   1         ISPAL=address%256;
  57   1         ISPFD=dat;
  58   1         Trigger_ISP();
  59   1         Disable_ISP(); 
  60   1      }
  61          
  62          /*
  63          unsigned char Flash_Read_Data(unsigned int address)
  64          {
  65             unsigned char dat;
  66             
  67             Enable_ISP();
  68             ISPCN=0x00;
  69             ISPAH=address/256;
  70             ISPAL=address%256;
  71             Trigger_ISP();
  72             dat=ISPFD;
  73             Disable_ISP();
  74             return dat;    
  75          }
  76          */
  77             
  78          /*---------------------------------------------------
  79             end of file
  80          ----------------------------------------------------*/


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    104    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----       5
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
